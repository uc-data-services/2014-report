{
    "contents" : "#copied code from previous script (need to integrate) 00 remove plots foruse in article, report or presos\n#lab.stats$date.in <- ydm(lab.stats$date.in)\nlab.stats$date.in <- as.Date(lab.stats$date.in, format=\"%m/%d/%Y\")\n#lab.stats$date. <- strptime(lab.stats$date.in, format=\"%m/%d/%Y\")\n#some frequencies\n\n#need to figure out how to get FY data\n#below code is a mix of approaches, basically need to convert to using time-series and then take slices off of that \n#by a certain format and feeding into ggplot for day,month,year, semester stats (also cumulative freq)\n# todo is to use time- based stuff (most visited day/time, etc.) duration possible for some earlier data\n#also use data with Id to tab repeats create a histo and bin\nbyday <- ddply(lab.stats, .(date.in), summarize, freq=length(date.in))\n#convert to time series\nbyday.xts <- as.xts(byday$freq, order.by=byday$date.in)\nplot(byday.xts['2005-01/2012-09'], type='candles')\nstatsbyyear <- ddply(lab.stats, .(year(date.in)), summarize, freq=length(date.in))\nbyyearday <- ddply(lab.stats, .(year(date.in), yday(date.in)), summarise, freq=length(date.in))\n#some reason can get m-y via lubridate, so use format\nbyyrmonth <- ddply(lab.stats, .(format(date.in, \"%Y-%m\")), summarise, length(date.in))\n#add a count for each row\nlab.stats$count <- 1 \nstatsbyday = data.frame(table(labstat.datein))\nplot(statsbyday$labstat.datein, statsbyday$Freq, type=\"l\")\n\nlibrary(ggplot2)\nggplot(data=byday, aes(x=date.in, y=freq, group=1)) + geom_line()\n\nstatsbyday = ddply(labstat.datein))\nmonthlySummary <- ddply(lab.stats, .(format(date.in, \"%Y-%m\" )), summarize, freq=length(count))\nmonthlySummary <- ddply(lab.stats, .(format(date.in, \"%Y-%m\" )), summarize, freq=length(date.in))\n\nplot(statsbyday$labstat.datein, statsbyday$Freq, type=\"l\")\nggplot(data=statsbyday, aes(x=Var1, y=Freq, group=1)) + geom_line()\n\nggplot(data=statsbyday)  \n  geom_line(aes(x=Var1, y=Freq, group=1)) +\n  scale_x_date(breaks =\"years\", minor_breaks=\"months\") \n#  coord_cartesian(xlim=as.numeric(as.Date(c(\"2005/10/2\", \"2012/10/27\"))))\n\npng(\"date_ticks_plot.png\", height=600, width=600)\nprint(q2)\ndev.off()\n#need to find missing values\nlabstat.miss = labstat.datein\nstructure(setdiff(do.call(seq, as.list(range(labstat.miss))),labstat.miss), class = \"Date\")\n#chek out na.locf(object, na.rm = TRUE, ...) command\n\n#year\nyr <- strftime(date.in, \"%Y\")\nyr#pull out year-mo\ntable(yr) \nas.vector(table(yr)) #makes  a time series - need to figure out parameters\nts(as.vector(table(yr)))\nyrts = ts(as.vector(table(yr)), start=2005)\n\n#monthly data\nyrmo = strftime(date.in, \"%Y-%m\")\nyrmo = table(yrmo)\nyrmo.vec = as.vector(yrmo)\nyrmo.vec <- append(yrmo.vec, 0, after=19) #append zero for missing mo, shd add 0 b/t 31 and 7\nyrmots = ts(as.vector(table(yrmo)), start=c(2005,10), frequency=12)\nyrmots.2006 <- window(yrmots, start=c(2006,1), end=c(2006,12), freq=12) #basically creates a slice of the yrmots\nyrmots.2007 <- window(yrmots, start=c(2007,1), end=c(2007,12), freq=12)\nyrmots.2008 <- window(yrmots, start=c(2008,1), end=c(2008,12), freq=12)\nyrmots.2009 <- window(yrmots, start=c(2009,1), end=c(2009,12), freq=12)\n#need to get data into one frame from csv\nplot(months, yrmots.2006, ylab=\"number of users\", col=\"blue\", lwd=2, main=\"data lab users\")\nlines(months, yrmots.2007, ylab=\"number of users\", col=\"blue\", lwd=2, main=\"data lab users\")\n#takes table and makes data frame\ndata.frame(yrmo)\n\n# using zoo\n# need to create a table of daily, monthly etc data and then get into df\nas.yearmon(2005 + seq(10,90)/12)\n\n#existing code below, need to integrare with abvoe\n#creating a date/time vector\ndt_stats2005_12 <- mdy_hms(paste(lab_stats.2005_12$date.in,lab_stats.2005_12$time.in))\ndt_stats2012_3 <- mdy_hms(lab_stats.2012_13$Timestamp)\n#creating a %Y%m freq table as data.frame\ndt2005_13 <- data.frame(c(dt_stats2005_12, dt_stats2012_3))\ncolnames(dt2005_13)[1] <- \"timestamp\"\ndt2005_13 <- transform(dt2005_13, \n                        year = year(timestamp),\n                        month = month(timestamp),\n                        dayofyear = yday(timestamp)\n)\n#can use ddply below to create byday freq, then can convert to ts - might not need above col year\ndt_ymfreq <- as.data.frame(with(dt2005_13, table(year, month)))\nindex <- with(dt_ymfreq, order(year, month))\ndt_ymfreq <- dt_ymfreq[index,]\nggplot(dt_ymfreq, aes(month, Freq)) + geom_line(aes(colour=year))\nggplot(dt_ymfreq, aes(month, Freq)) + geom_line( )  + facet_grid(year ~ .)\n# trying to put multi years on plot\nggplot(dt_ymfreq, aes(month, Freq, group=year)) + \n  geom_line( aes(colour = year) )  + \n  geom_point( aes(shape = year))\n",
    "created" : 1396047531160.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "637831356",
    "id" : "EFD03537",
    "lastKnownWriteTime" : 1395614801,
    "path" : "~/Dropbox/Documents/datalab/datalabreport/clean_dlab_usage.R",
    "project_path" : "clean_dlab_usage.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}